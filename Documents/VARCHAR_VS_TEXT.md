# varchar vs text(LOB)

## 게시글을 담을때 varchar가 좋을까? text(Lob)이 좋을까?
* 해당 프로젝트에서는 게시글의 글자를 800자로 제한하고 있다. 
* 800자는 조금 부담이 되는 큰 길이이다.
* 모든 글이 800자는 아니지만 그래도 부담이 된다.
* 문자를 저장하는 타입은 크게 varchar와 text(LOB)이 있고,
* text를 고려해볼 정도의 긴 길이의 데이터여서 고민이 들었다.
* 결론부터 말하자면 varchar(800)을 사용하였고, 그 이유를 아래에서 서술한다.

## LOB을 사용하면 어떤 문제가 발생할까?
* JPA 에서도 LOB을 지원한다. @Lob 어노테이션을 붙이면된다.
* 그러나 이러한 형태의 컬럼은 사이즈가 크기 때문에 조회시에 성능저하가 발생한다.
* 이 때문에 컬렉션 조회에서는 lob 컬럼을 제외하고 조회를 많이 한다. 그리고 상세 화면에서만 보여주는 식이다.
* 해당 프로젝트는 제목이 있고 컨텐츠가 있는 형태가 아니다.
* 순수 텍스트 기반의 sns이기때문에 바로바로 텍스트 보여야한다.
* 즉 컬렉션 조회에서도 텍스트가 있어야한다. 따라서 상세조회에만 보이도록하는 지연 방식은 옳지 않다.

## 결론
* 프로젝트의 정책적인 문제로 결론이 달라질 수 있다.
* 해당 프로젝트에서는 lob대신 varchar를 쓰기로 하였다.
* 다만 이런 경우가 아니라면 lob 컬럼을 쓰고, 상세조회에만 넘겨주는 방식을 사용하면
* 매번 조회때마다 800자 길이의 컬럼이 포함된 데이터를 조회하는 것보다 훨씬 좋은 성능을 가져갈 수 있을 것이다.